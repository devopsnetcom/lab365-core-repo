{
    "subscriptionName": "Azure Sandbox",
    "storageAccount": {
        "resourceGroup": "RG-CoreComponents",
        "name": "stglab365eastus001",
        "location": "eastus",
        "access_tier" : "Hot",
        "kind": "StorageV2",
        "account_tier": "Standard",
        "account_replication_type": "RAGRS",
        "tls_version": "TLS1_2",
        "HNS_enabled": true,
        "queueservice": {
            "name": "eventgrid-events-queue"
        }
    },
    "eventGrid": {
        "resourceGroup": "RG-CoreComponents",
        "name": "egt-lab365-eastus-001",
        "location": "eastus",
        "Schema": "EventGridSchema",
        "roles": [
            {
                "name": "EventGrid Data Contributor",
                "description": "Allows publishing events to Event Grid topics.",
                "scope": "{topic_id}",
                "principalId": "{principal_id}"
            }
        ],
        "eventsubscriptions": [
            {
                "name": "eventgrid-events-to-stg",
                "topicName": "{topic_name}",
                "endpointType": "storagequeue",
                "endpointUrl": "{storage_queue_endpoint_url}"
                
            },
            {
                "name": "my-node-webhook-subscription",
                "topicName": "{topic_name}",
                "endpointType": "webhook",
                "endpointUrl": "https://stagelab365.netcomlearning.com/api/v1/azureEvents"
            }
        ]
    },
    "network": {
        "resourceGroup": {
            "name": "RG-CoreComponents",
            "location": "eastus"
        },
        "vnet": {
            "name": "Shared-Hub-VNet",
            "addressSpace": "10.0.0.0/16"
        },
        "subnets": [
            {
                "name": "guac-subnet",
                "addressPrefix": "10.0.0.0/24"
            }
        ]
    },
    "parentRole": {
        "name": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
        "description": "Allows creating and managing resources inside a Resource Group but prevents RG deletion or moving resources.",
        "assignableScopes": [
            "/subscriptions/{subscriptionid}"
        ],
        "permissions": [
            {
                "actions": [
                    "Microsoft.Resources/subscriptions/read",
                    "Microsoft.Resources/subscriptions/resourceGroups/read",
                    "Microsoft.Resources/subscriptions/resourcegroups/resources/read",
                    "Microsoft.Resources/subscriptions/resourcegroups/deployments/operationstatuses/read",
                    "Microsoft.Resources/subscriptions/resourcegroups/deployments/operations/read",
                    "Microsoft.Resources/subscriptions/resourcegroups/deployments/read",
                    "Microsoft.Resources/subscriptions/resourcegroups/deployments/write"                    
                ],
                "notActions": [
                    "Microsoft.Resources/subscriptions/resourceGroups/delete",
                    "Microsoft.Resources/subscriptions/resourceGroups/moveResources/action",
                    "Microsoft.Resources/subscriptions/resourceGroups/validateMoveResources/action"
                ],
                "dataActions": [],
                "notDataActions": []
            }
        ]
    },
    "courses": [
        {
            "name": "AZ-104",
            "modules": [
                {
                    "name": "Lab01",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Manage Microsoft Entra ID Identities",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",
                                    
                                    "Microsoft.Authorization/*/write"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab02a",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Manage Subscriptions and RBAC",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Authorization/roleAssignments/*",
                                    "Microsoft.Authorization/roleDefinitions/write"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab02b",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Manage Governance via Azure Policy",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Management/managementGroups/*",
                                    "Microsoft.Authorization/policyAssignments/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab03",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Manage Azure resources using ARM Templates",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Resources/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab04",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Implement Virtual Networking",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Network/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab05",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Implement Intersite Connectivity",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Network/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab06",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Implement Network Traffic Management",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Network/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                },
                {
                    "name": "Lab07",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Manage Azure Storage",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",

                                    "Microsoft.Storage/*"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                }
            ]
        },
        {
            "name": "AI-102",
            "modules": [
                {
                    "name": "Lab01",
                    "adGroup": {
                        "nameTemplate": "{course}-Grp-{module}",
                        "description": "AD group for {course}-{module} students. Create and deploy Azure AI services (Cognitive Services)",
                        "type": "Security",
                        "membershipType": "Assigned"
                    },
                    "resourceGroup": {
                        "nameTemplate": "rg-{course}-{module}",
                        "location": "eastus",
                        "roleAssignments": [
                            {
                                "roleName": "NetCom-RG-ResourceCreator-NoDeleteOrMove",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            },
                            {
                                "roleName": "{course}-{module}-ResourceManager",
                                "principalType": "Group",
                                "principalid": "{principalid}"
                            }
                        ]
                    },
                    "roles": [
                        {
                            "nameTemplate": "{course}-{module}-ResourceManager",
                            "description": "Allows create, read, update and delete operations on allowed resource types inside the lab Resource Group, without allowing RG deletion or resource moves.",
                            "assignableScopes": [
                                "/subscriptions/{subscriptionid}/resourceGroups/rg-{course}-{module}"
                            ],
                            "permissions": {
                                "actions": [
                                    "Microsoft.Resources/deployments/read",
                                    "Microsoft.Resources/deployments/write",
                                    "Microsoft.Resources/deployments/validate/action",
                                    
                                    "Microsoft.CognitiveServices/accounts/*",
                                    "Microsoft.CognitiveServices/locations/checkSkuAvailability/action"
                                ],
                                "notActions": [],
                                "dataActions": [],
                                "notDataActions": []
                            }
                        }
                    ]
                }
            ]
        }
    ]
}